{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jaimi\\\\Desktop\\\\IN3007_Individual_Project\\\\movie-sentiment-app\\\\src\\\\components\\\\MovieDetails.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport MovieVisualisation from './findSentimentPageComponents/MovieVisualisation';\nimport MoviePoster from './MoviePoster';\nimport \"../styles/FindSentimentStyles.css\";\nimport \"../styles/CompareMovieResultsStyles.css\";\nimport MovieTrailer from './findSentimentPageComponents/MovieTrailer';\nimport moment from 'moment';\n\nclass MovieDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      movie_found: false,\n      component_location: this.props.component_location,\n      movie_id: '',\n      movie_name: this.props.movieName,\n      movie_overview: '',\n      movie_release_date: '',\n      review_score: '',\n      twitterSentiment: [],\n      youtubeSentiment: [],\n      see_or_skip: '',\n      date_analysed: ''\n    };\n  }\n\n  getMovieInformation(movieName) {\n    axios.get(\"https://api.themoviedb.org/3/search/movie\", {\n      params: {\n        api_key: '146fa0756d99220f8811aceb8a865301',\n        language: 'en-US',\n        query: movieName,\n        page: '1',\n        include_adult: 'false'\n      }\n    }).then(apiResponse => {\n      var reviewScore = \"\";\n\n      if (Number(apiResponse.data.results[0].vote_average) !== 0) {\n        reviewScore = apiResponse.data.results[0].vote_average;\n      } else {\n        reviewScore = \"No Reviews Yet\";\n      }\n\n      this.setState({\n        movie_id: apiResponse.data.results[0].id,\n        movie_name: apiResponse.data.results[0].title,\n        movie_overview: apiResponse.data.results[0].overview,\n        movie_release_date: apiResponse.data.results[0].release_date,\n        review_score: reviewScore\n      });\n      this.checkIfMovieAnalysed(this.state.movie_id);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  checkIfMovieAnalysed(movie_id) {\n    axios.get(\"http://localhost:5000/movieSentiment/findMovieSentiment/\" + movie_id).then(apiResponse => {\n      if (apiResponse.data !== null) {\n        if (moment().subtract(14, \"days\").startOf(\"day\").isBefore(apiResponse.data.date_analysed)) {\n          this.setState({\n            movie_found: true,\n            twitterSentiment: [Number(apiResponse.data.twitter_positive_comments), Number(apiResponse.data.twitter_neutral_comments), Number(apiResponse.data.twitter_negative_comments)],\n            youtubeSentiment: [Number(apiResponse.data.youtube_positive_comments), Number(apiResponse.data.youtube_neutral_comments), Number(apiResponse.data.youtube_negative_comments)],\n            see_or_skip: apiResponse.data.see_or_skip,\n            date_analysed: apiResponse.data.date_analysed\n          });\n\n          if (this.state.component_location === \"compare\") {\n            this.props.handler(this.state.movie_id, this.state.twitterSentiment, this.state.youtubeSentiment);\n          }\n        } else {\n          this.findMovieSentiment(true);\n        }\n      } else {\n        this.findMovieSentiment(false);\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  findMovieSentiment(isUpdate) {\n    const api_url = \"http://127.0.0.1:5000/see-or-skip/get_sentiment\";\n    const data = JSON.stringify({\n      movie_name: this.state.movie_name\n    });\n    axios.post(api_url, data, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(apiResponse => {\n      this.setState({\n        twitterSentiment: [Number(apiResponse.data.twitter_positive_comments), Number(apiResponse.data.twitter_neutral_comments), Number(apiResponse.data.twitter_negative_comments)],\n        youtubeSentiment: [Number(apiResponse.data.youtube_positive_comments), Number(apiResponse.data.youtube_neutral_comments), Number(apiResponse.data.youtube_negative_comments)],\n        date_analysed: new Date()\n      });\n\n      if (this.state.component_location === \"compare\") {\n        this.props.handler(this.state.movie_id, this.state.twitterSentiment, this.state.youtubeSentiment);\n      }\n\n      const totalPositive = Number(this.state.twitterSentiment[0]) + Number(this.state.youtubeSentiment[0]);\n      const totalNegative = Number(this.state.twitterSentiment[2]) + Number(this.state.youtubeSentiment[2]);\n\n      if (totalPositive > totalNegative) {\n        this.setState({\n          see_or_skip: \"See!\"\n        });\n      } else {\n        this.setState({\n          see_or_skip: \"Skip!\"\n        });\n      }\n\n      if (isUpdate) {\n        this.updateMovieSentiment();\n      } else {\n        this.addMovieSentimentToDatabase();\n      }\n    }).catch(error => {\n      console.log(error.response);\n    });\n  }\n\n  addMovieSentimentToDatabase() {\n    const api_url = \"http://localhost:5000/movieSentiment/saveMovieSentiment\";\n    const data = JSON.stringify({\n      movie_id: this.state.movie_id,\n      movie_name: this.state.movie_name,\n      release_date: this.state.movie_release_date,\n      twitter_positive_comments: this.state.twitter_positive_comments,\n      twitter_negative_comments: this.state.twitter_negative_comments,\n      twitter_neutral_comments: this.state.twitter_neutral_comments,\n      youtube_positive_comments: this.state.youtube_positive_comments,\n      youtube_negative_comments: this.state.youtube_negative_comments,\n      youtube_neutral_comments: this.state.youtube_neutral_comments,\n      see_or_skip: this.state.see_or_skip,\n      date_analysed: this.state.date_analysed\n    });\n    axios.post(api_url, data, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(apiResponse => console.log(apiResponse)).catch(error => {\n      console.log(error.response);\n    });\n  }\n\n  updateMovieSentiment() {\n    const api_url = \"http://localhost:5000/movieSentiment/updateMovieSentiment\";\n    const data = JSON.stringify({\n      movie_id: this.state.movie_id,\n      movie_name: this.state.movie_name,\n      release_date: this.state.movie_release_date,\n      twitter_positive_comments: this.state.twitter_positive_comments,\n      twitter_negative_comments: this.state.twitter_negative_comments,\n      twitter_neutral_comments: this.state.twitter_neutral_comments,\n      youtube_positive_comments: this.state.youtube_positive_comments,\n      youtube_negative_comments: this.state.youtube_negative_comments,\n      youtube_neutral_comments: this.state.youtube_neutral_comments,\n      see_or_skip: this.state.see_or_skip,\n      date_analysed: this.state.date_analysed\n    });\n    axios.post(api_url, data, {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(apiResponse => console.log(apiResponse)).catch(error => {\n      console.log(error.response);\n    });\n  }\n\n  componentDidMount() {\n    this.getMovieInformation(this.state.movie_name);\n  }\n\n  render() {\n    if (this.state.component_location === \"find\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"findSentimentResults\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, this.state.movie_name), React.createElement(\"div\", {\n        className: \"findSentimentMovieDetails\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movieArea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(MoviePoster, {\n        image_size: \"w342\",\n        movie_title: this.state.movie_name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"movieInformation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, this.state.movie_overview), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Release Date: \", moment(this.state.movie_release_date).format(\"DD/MM/YYYY\")), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Review Score: \", this.state.review_score), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"You should probably: \", this.state.see_or_skip)))), React.createElement(\"div\", {\n        className: \"movieTrailer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(MovieTrailer, {\n        movie_id: this.state.movie_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"visualisationArea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(MovieVisualisation, {\n        twitter_positive_comments: this.state.twitter_positive_comments,\n        twitter_negative_comments: this.state.twitter_negative_comments,\n        twitter_neutral_comments: this.state.twitter_neutral_comments,\n        youtube_positive_comments: this.state.youtube_positive_comments,\n        youtube_negative_comments: this.state.youtube_negative_comments,\n        youtube_neutral_comments: this.state.youtube_neutral_comments,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }))));\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, this.state.movie_name), React.createElement(\"div\", {\n        className: \"movieArea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(MoviePoster, {\n        image_size: \"w185\",\n        movie_title: this.state.movie_name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"compareMovieInformation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, this.state.movie_overview), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"Release Date: \", moment(this.state.movie_release_date).format(\"DD/MM/YYYY\")), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Review Score: \", this.state.review_score), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"You should probably: \", this.state.see_or_skip))));\n    }\n  }\n\n}\n\nexport default MovieDetails;","map":{"version":3,"sources":["C:/Users/Jaimi/Desktop/IN3007_Individual_Project/movie-sentiment-app/src/components/MovieDetails.js"],"names":["React","axios","MovieVisualisation","MoviePoster","MovieTrailer","moment","MovieDetails","Component","constructor","props","state","movie_found","component_location","movie_id","movie_name","movieName","movie_overview","movie_release_date","review_score","twitterSentiment","youtubeSentiment","see_or_skip","date_analysed","getMovieInformation","get","params","api_key","language","query","page","include_adult","then","apiResponse","reviewScore","Number","data","results","vote_average","setState","id","title","overview","release_date","checkIfMovieAnalysed","catch","error","console","log","subtract","startOf","isBefore","twitter_positive_comments","twitter_neutral_comments","twitter_negative_comments","youtube_positive_comments","youtube_neutral_comments","youtube_negative_comments","handler","findMovieSentiment","isUpdate","api_url","JSON","stringify","post","headers","Date","totalPositive","totalNegative","updateMovieSentiment","addMovieSentimentToDatabase","response","componentDidMount","render","format"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport MovieVisualisation from './findSentimentPageComponents/MovieVisualisation'\r\nimport MoviePoster from './MoviePoster';\r\nimport \"../styles/FindSentimentStyles.css\"\r\nimport \"../styles/CompareMovieResultsStyles.css\"\r\nimport MovieTrailer from './findSentimentPageComponents/MovieTrailer';\r\nimport moment from 'moment';\r\n\r\nclass MovieDetails extends React.Component {\r\n   constructor(props) {\r\n     super(props)\r\n     this.state = {\r\n      movie_found: false,\r\n      component_location : this.props.component_location,\r\n      movie_id: '',\r\n      movie_name : this.props.movieName,\r\n      movie_overview : '',\r\n      movie_release_date : '',\r\n      review_score : '',\r\n      twitterSentiment : [],\r\n      youtubeSentiment : [],\r\n      see_or_skip: '',\r\n      date_analysed: ''\r\n     }\r\n   }\r\n\r\n    getMovieInformation(movieName) {\r\n      axios.get(\"https://api.themoviedb.org/3/search/movie\", {\r\n       params: {\r\n         api_key : '146fa0756d99220f8811aceb8a865301',\r\n         language : 'en-US',\r\n         query : movieName,\r\n         page : '1',\r\n         include_adult : 'false' \r\n       }\r\n     }).then(apiResponse => {\r\n        var reviewScore = \"\"\r\n\r\n       if (Number(apiResponse.data.results[0].vote_average) !== 0) {\r\n         reviewScore = apiResponse.data.results[0].vote_average\r\n       } else {\r\n        reviewScore = \"No Reviews Yet\"\r\n       }\r\n\r\n       this.setState({\r\n        movie_id : apiResponse.data.results[0].id,\r\n        movie_name : apiResponse.data.results[0].title,\r\n        movie_overview : apiResponse.data.results[0].overview,\r\n        movie_release_date : apiResponse.data.results[0].release_date,\r\n        review_score : reviewScore,\r\n       })\r\n       this.checkIfMovieAnalysed(this.state.movie_id)\r\n\r\n      })\r\n     .catch(error => {\r\n       console.log(error)\r\n     })\r\n    }\r\n\r\n    checkIfMovieAnalysed(movie_id) {\r\n      axios.get(\"http://localhost:5000/movieSentiment/findMovieSentiment/\" + movie_id)\r\n      .then(apiResponse => {\r\n        if (apiResponse.data !== null) {\r\n          if (moment().subtract(14, \"days\").startOf(\"day\").isBefore(apiResponse.data.date_analysed)) {\r\n            this.setState({\r\n              movie_found : true,\r\n              twitterSentiment : [Number(apiResponse.data.twitter_positive_comments), Number(apiResponse.data.twitter_neutral_comments), Number(apiResponse.data.twitter_negative_comments)],\r\n              youtubeSentiment : [Number(apiResponse.data.youtube_positive_comments), Number(apiResponse.data.youtube_neutral_comments), Number(apiResponse.data.youtube_negative_comments)],\r\n              see_or_skip: apiResponse.data.see_or_skip,\r\n              date_analysed: apiResponse.data.date_analysed\r\n            })\r\n\r\n            if (this.state.component_location === \"compare\") {\r\n              this.props.handler(this.state.movie_id, this.state.twitterSentiment, this.state.youtubeSentiment)\r\n            }\r\n          } else {\r\n            this.findMovieSentiment(true)\r\n          }\r\n        } else {\r\n          this.findMovieSentiment(false)\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n    }\r\n\r\n    findMovieSentiment(isUpdate) {\r\n      const api_url = \"http://127.0.0.1:5000/see-or-skip/get_sentiment\"\r\n      const data = JSON.stringify({\r\n        movie_name : this.state.movie_name\r\n      })\r\n      axios.post(api_url, data ,{\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })  \r\n      .then(apiResponse => {  \r\n        this.setState({\r\n          twitterSentiment : [Number(apiResponse.data.twitter_positive_comments), Number(apiResponse.data.twitter_neutral_comments), Number(apiResponse.data.twitter_negative_comments)],\r\n          youtubeSentiment : [Number(apiResponse.data.youtube_positive_comments), Number(apiResponse.data.youtube_neutral_comments), Number(apiResponse.data.youtube_negative_comments)],\r\n          date_analysed : new Date()\r\n        })\r\n\r\n        if (this.state.component_location === \"compare\") {\r\n          this.props.handler(this.state.movie_id, this.state.twitterSentiment, this.state.youtubeSentiment)        \r\n        }\r\n\r\n        const totalPositive = Number(this.state.twitterSentiment[0]) + Number(this.state.youtubeSentiment[0])\r\n        const totalNegative = Number(this.state.twitterSentiment[2]) + Number(this.state.youtubeSentiment[2])\r\n\r\n        if (totalPositive > totalNegative) {\r\n          this.setState({\r\n            see_or_skip : \"See!\"\r\n          })\r\n        } else {\r\n          this.setState({\r\n            see_or_skip : \"Skip!\"\r\n          })\r\n        }\r\n\r\n        if (isUpdate) {\r\n          this.updateMovieSentiment()\r\n        } else {  \r\n          this.addMovieSentimentToDatabase()\r\n        }\r\n\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response)\r\n      })\r\n    }\r\n\r\n    addMovieSentimentToDatabase() {\r\n      const api_url = \"http://localhost:5000/movieSentiment/saveMovieSentiment\"\r\n      const data = JSON.stringify({\r\n        movie_id : this.state.movie_id,\r\n        movie_name : this.state.movie_name,\r\n        release_date : this.state.movie_release_date,\r\n        twitter_positive_comments : this.state.twitter_positive_comments,\r\n        twitter_negative_comments : this.state.twitter_negative_comments,\r\n        twitter_neutral_comments : this.state.twitter_neutral_comments,\r\n        youtube_positive_comments : this.state.youtube_positive_comments,\r\n        youtube_negative_comments : this.state.youtube_negative_comments,\r\n        youtube_neutral_comments : this.state.youtube_neutral_comments,\r\n        see_or_skip : this.state.see_or_skip,\r\n        date_analysed : this.state.date_analysed\r\n      })\r\n      axios.post(api_url, data ,{\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })  \r\n      .then(apiResponse => console.log(apiResponse))\r\n      .catch(error => {\r\n        console.log(error.response)\r\n      })\r\n    }\r\n\r\n    updateMovieSentiment() {\r\n      const api_url = \"http://localhost:5000/movieSentiment/updateMovieSentiment\"\r\n      const data = JSON.stringify({\r\n        movie_id : this.state.movie_id,\r\n        movie_name : this.state.movie_name,\r\n        release_date : this.state.movie_release_date,\r\n        twitter_positive_comments : this.state.twitter_positive_comments,\r\n        twitter_negative_comments : this.state.twitter_negative_comments,\r\n        twitter_neutral_comments : this.state.twitter_neutral_comments,\r\n        youtube_positive_comments : this.state.youtube_positive_comments,\r\n        youtube_negative_comments : this.state.youtube_negative_comments,\r\n        youtube_neutral_comments : this.state.youtube_neutral_comments,\r\n        see_or_skip : this.state.see_or_skip,\r\n        date_analysed : this.state.date_analysed\r\n      })\r\n      axios.post(api_url, data ,{\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })  \r\n      .then(apiResponse => console.log(apiResponse))\r\n      .catch(error => {\r\n        console.log(error.response)\r\n      })\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.getMovieInformation(this.state.movie_name)\r\n    }\r\n\r\n   render() {\r\n    if (this.state.component_location === \"find\") {\r\n      return (\r\n        <div>\r\n          <div className=\"findSentimentResults\">\r\n            <h3>{this.state.movie_name}</h3>\r\n            <div className=\"findSentimentMovieDetails\">\r\n              <div className=\"movieArea\">\r\n                <MoviePoster \r\n                  image_size={\"w342\"}\r\n                  movie_title={this.state.movie_name}\r\n                />\r\n                <div className=\"movieInformation\">\r\n                  <p>{this.state.movie_overview}</p>\r\n                  <p>Release Date: {moment(this.state.movie_release_date).format(\"DD/MM/YYYY\")}</p>\r\n                  <p>Review Score: {this.state.review_score}</p>\r\n                  <p>You should probably: {this.state.see_or_skip}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"movieTrailer\">\r\n              <MovieTrailer \r\n                movie_id={this.state.movie_id}\r\n              />\r\n            </div>\r\n            <div className=\"visualisationArea\">\r\n              <MovieVisualisation\r\n                twitter_positive_comments={this.state.twitter_positive_comments}\r\n                twitter_negative_comments={this.state.twitter_negative_comments}\r\n                twitter_neutral_comments={this.state.twitter_neutral_comments}\r\n                youtube_positive_comments={this.state.youtube_positive_comments}\r\n                youtube_negative_comments={this.state.youtube_negative_comments}\r\n                youtube_neutral_comments={this.state.youtube_neutral_comments}\r\n              />\r\n            </div>\r\n          </div>\r\n       </div>\r\n     )\r\n    } else {\r\n      return (\r\n        <div>\r\n            <h3>{this.state.movie_name}</h3>\r\n            <div className=\"movieArea\">\r\n                <MoviePoster \r\n                    image_size={\"w185\"}\r\n                    movie_title={this.state.movie_name}\r\n                />\r\n                <div className=\"compareMovieInformation\">\r\n                    <p>{this.state.movie_overview}</p>\r\n                    <p>Release Date: {moment(this.state.movie_release_date).format(\"DD/MM/YYYY\")}</p>\r\n                    <p>Review Score: {this.state.review_score}</p>\r\n                    <p>You should probably: {this.state.see_or_skip}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      )\r\n    }\r\n   }\r\n}\r\n\r\nexport default MovieDetails;"]},"metadata":{},"sourceType":"module"}